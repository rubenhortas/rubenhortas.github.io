<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="DNS hardening with Quad9" /><meta property="og:locale" content="en" /><meta name="description" content="Nowadays, in times when malware proliferates, who isn’t worried about clicking by mistake (or not) on a malicious link? It’s more, who isn’t worried about a family member or friend, with less computer knowledge, clicking on a malicious link? A wrong click and all your network could be compromised. All your machines… Even if only one machine was compromised, I have to admit that it’s not one of the things I would like to suffer…" /><meta property="og:description" content="Nowadays, in times when malware proliferates, who isn’t worried about clicking by mistake (or not) on a malicious link? It’s more, who isn’t worried about a family member or friend, with less computer knowledge, clicking on a malicious link? A wrong click and all your network could be compromised. All your machines… Even if only one machine was compromised, I have to admit that it’s not one of the things I would like to suffer…" /><link rel="canonical" href="https://rubenhortas.github.io/posts/dns-hardening-quad9/" /><meta property="og:url" content="https://rubenhortas.github.io/posts/dns-hardening-quad9/" /><meta property="og:site_name" content="rubenhortas@blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-24T02:00:01+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="DNS hardening with Quad9" /><meta name="twitter:site" content="@rubenhortas" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-24T02:00:01+02:00","datePublished":"2023-09-24T02:00:01+02:00","description":"Nowadays, in times when malware proliferates, who isn’t worried about clicking by mistake (or not) on a malicious link? It’s more, who isn’t worried about a family member or friend, with less computer knowledge, clicking on a malicious link? A wrong click and all your network could be compromised. All your machines… Even if only one machine was compromised, I have to admit that it’s not one of the things I would like to suffer…","headline":"DNS hardening with Quad9","mainEntityOfPage":{"@type":"WebPage","@id":"https://rubenhortas.github.io/posts/dns-hardening-quad9/"},"url":"https://rubenhortas.github.io/posts/dns-hardening-quad9/"}</script><title>DNS hardening with Quad9 | rubenhortas@blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="rubenhortas@blog"><meta name="application-name" content="rubenhortas@blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">rubenhortas@blog</a></div><div class="site-subtitle font-italic">Learning everyday</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="javascript:location.href = 'mailto:' + ['rubenhortas','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/rubenhortas" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/rubenhortas" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/rubenhortas" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>DNS hardening with Quad9</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>DNS hardening with Quad9</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1695513601" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 24, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/rubenhortas">Rubén Hortas</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="719 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><p>Nowadays, in times when malware proliferates, who isn’t worried about clicking by mistake (or not) on a malicious link? It’s more, who isn’t worried about a family member or friend, with less computer knowledge, clicking on a malicious link? A wrong click and all your network could be compromised. All your machines… Even if only one machine was compromised, I have to admit that it’s not one of the things I would like to suffer…</p><p>There’s a few ways to block malicious domains, one of them is <a href="https://github.com/StevenBlack/hosts">Steven Black’s hosts</a>. It’s a great solution, but it has some downsides. First of all, you need to install it in every machine, generate custom host files and take care of keeping it updated (manually or scripting and scheduling a task). This could be ok if you have few machines and you have full access whenever you want to them. But, even so, may cause performance loss on some cases (above all on Windows machines).</p><p>So, even I think <a href="https://github.com/StevenBlack/hosts">Steven Black’s hosts</a> it’s a great solution, and I use it myself on some machines, what else we can do? We can protect ourselves through our DNS Server. If our DNS server takes care of malware, phishing, spyware, botnets and other threats, we won’t have to! In the best case, if we had machines that never connect to another networks, we will only need change the DNS server on our router (if the router allows it). But, I don’t recommend <strong>only</strong> this, because, what is normal is that we have laptops and mobile devices that connects to many networks. Device DNS server configuracion usually take precedence over the router’s configuration. So, we will use our custom server although the router doesn’t allow the change and in any network. So, I recommend to change the DNS server in our router (if the router allows it) <strong>AND</strong> in every machine that we have. Setting a custom DNS server on the router will protect the devices that takes the router’s DNS server by default (such as a new -and unconfigured- computer, or the laptop and/or mobile phone of a family member or friend invited to our house). The proccess to set a custom DNS server differs quite a bit between Windows, GNU/Linux and Android, and between their versions, so I’m not going to go into how do it.</p><p>The advantages of changing the DNS server, are that we only have to change it one time for each machine and for the router (if the router allows it). And we can keep <a href="https://github.com/StevenBlack/hosts">Steven Black’s hosts</a> as a second layer protection. And, even if we can keep it as updated as we want, we can sleep a bit more peacefully knowing that we are a little safer.</p><h1 id="quad9">Quad9</h1><p>The DNS server I chose to protect myself is <a href="https://www.quad9.net/">Quad9</a>. According to <a href="https://en.wikipedia.org/wiki/Quad9">Wikipedia</a>:</p><blockquote><p>Quad9 is a global public recursive DNS resolver that aims to protect users from malware and phishing. Quad9 is operated by the Quad9 Foundation, a Swiss public-benefit, not-for-profit foundation with the purpose of improving the privacy and cybersecurity of Internet users, headquartered in Zurich. It is the only global public resolver which is operated not-for-profit, in the public benefit. … Several independent evaluations have found Quad9 to be the most effective (97%) at blocking malware and phishing domains. … The domains which are filtered are not determined by Quad9, but instead supplied to Quad9 by a variety of independent threat-intelligence analysts, using different methodologies. Quad9 was the first to use standards-based strong cryptography to protect the privacy of its users’ DNS queries, and the first to use DNSSEC cryptographic validation to protect users from domain name hijacking Quad9 protects users’ privacy by not retaining or processing the IP address of its users, and is consequently GDPR-compliant.</p></blockquote><p>And, according to <a href="https://www.quad9.net/">Quad9</a>:</p><blockquote><p>The system uses threat intelligence from more than a dozen of the industry’s leading cybersecurity companies to give a real-time perspective on what websites are safe and what sites are known to include malware or other threats.</p></blockquote><p>So, it’s seems a great solution. Once we have seen the why and the how, all that remains is to set <a href="https://www.quad9.net/">Quad9’s</a> DNS servers as our new custom DNS servers:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre># Quad9's DNS servers for IPv4: 9.9.9.9, 149.112.112.112
# Quad9's DNS servers for IPv6: 2620:fe::fe, 2620:fe::9
</pre></table></code></div></div><p><em>Enjoy! ;)</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/hardening/'>hardening</a>, <a href='/categories/dns/'>dns</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/hardening/" class="post-tag no-text-decoration" >hardening</a> <a href="/tags/dns/" class="post-tag no-text-decoration" >dns</a> <a href="/tags/quad9/" class="post-tag no-text-decoration" >quad9</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=DNS%20hardening%20with%20Quad9%20-%20rubenhortas@blog&url=https%3A%2F%2Frubenhortas.github.io%2Fposts%2Fdns-hardening-quad9%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=DNS%20hardening%20with%20Quad9%20-%20rubenhortas@blog&u=https%3A%2F%2Frubenhortas.github.io%2Fposts%2Fdns-hardening-quad9%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Frubenhortas.github.io%2Fposts%2Fdns-hardening-quad9%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/python-web-server/">Python web server</a><li><a href="/posts/python-charset-detection/">Python charset detection</a><li><a href="/posts/keep-ssh-session-alive/">Keep alive ssh sessions</a><li><a href="/posts/find-files-containing-specific-text-gnu-linux/">Find files containing specific text on GNU/Linux</a><li><a href="/posts/upload-package-pypi/">Upload a package to PyPI</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hack-the-box/">hack the box</a> <a class="post-tag" href="/tags/challenge/">challenge</a> <a class="post-tag" href="/tags/gnu-linux/">gnu/linux</a> <a class="post-tag" href="/tags/administration/">administration</a> <a class="post-tag" href="/tags/personal/">personal</a> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/hardening/">hardening</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/misc/">misc</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/firefox-dns-over-https/"><div class="card-body"> <em class="small" data-ts="1670544001" data-df="ll" > Dec 9, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Firefox DNS over HTTPS</h3><div class="text-muted small"><p> DoH When you type a web address or domain name into your address bar (example: www.mozilla.org), your browser sends a request over the Internet to look up the IP address for that website. Traditio...</p></div></div></a></div><div class="card"> <a href="/posts/how-to-avoid-punycode-attacks-firefox/"><div class="card-body"> <em class="small" data-ts="1673049601" data-df="ll" > Jan 7, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to avoid punycode attacks on firefox</h3><div class="text-muted small"><p> What is punycode? Punycode is a representation of Unicode with the limited ASCII character subset used for Internet hostnames. Using punycode host names containing Unicode characters are transcode...</p></div></div></a></div><div class="card"> <a href="/posts/iptables-essential-rules/"><div class="card-body"> <em class="small" data-ts="1697932801" data-df="ll" > Oct 22, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iptables essential rules. A starting point to protect your computer</h3><div class="text-muted small"><p> Learn how to configure a firewall with iptables from scratch. Protect your Linux systems from attacks with this essential, basic configuration guide. This guide covers syntax, commands, best prac...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/google-chrome-adprivacy/" class="btn btn-outline-primary" prompt="Older"><p>Google chrome adPrivacy</p></a> <a href="/posts/ssh-legacy-support/" class="btn btn-outline-primary" prompt="Newer"><p>SSH legacy support</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hack-the-box/">hack the box</a> <a class="post-tag" href="/tags/challenge/">challenge</a> <a class="post-tag" href="/tags/gnu-linux/">gnu/linux</a> <a class="post-tag" href="/tags/administration/">administration</a> <a class="post-tag" href="/tags/personal/">personal</a> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/hardening/">hardening</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/misc/">misc</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/rubenhortas">Rubén Hortas</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NJBDP43045"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NJBDP43045'); }); </script>
